<div class="wrapper wrapper-content">
  <div class="ibox float-e-margins">
    <div class="ibox-content">
      <%= form_for(user) do |f| %>
        <% if user.errors.any? %>
          <div class="panel panel-danger">
            <div class="panel-heading">
              <%= pluralize(user.errors.count, "error") %> prohibited this user from being saved.
            </div>

            <div class="panel-body">
              <ul>
                <% user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          </div>
        <% end %>

                <div class="form-group">
                            <%= f.label :first_name %>
                <%= f.text_field :first_name, :class => 'form-control' %>
                        </div>

                <div class="form-group">
                            <%= f.label :last_name %>
                <%= f.text_field :last_name, :class => 'form-control' %>
                        </div>

                <div class="form-group">
                            <%= f.label :email %>
                <%= f.text_field :email, :class => 'form-control' %>
                        </div>

                <div class="form-group">
                            <%= f.label :is_active %>
                <%= f.check_box :is_active, :class => 'form-control' %>
                        </div>
                
                <%= f.check_box :hub_user, :class => 'form-control hidden' %>
                       
                <%= f.check_box :regional_user, :class => 'form-control hidden' %>

                <%= f.check_box :is_admin, :class => 'form-control hidden ' %>

                <%= f.check_box :is_case_team, :class => 'form-control hidden' %>       
               
                       
                

                 <div class="form-group" id="div-role">
                            <%= f.label :Role %>
                <%= select_tag(:role,options_for_select(@roles),{:class => 'form-control'}) %>
                </div>


                 <div class="form-group" id="div-department">
                            <%= f.label :Role %>
                <%= f.select :case_team,options_for_select(@department, :selected => f.object.case_team, :include_blank => true),{}, {:class => 'form-control'} %>
                </div>

                 

                 <div class="form-group" id="div-hub">
                            <%= f.label :Hub %>
                <%= f.select :hub,options_for_select(@hubs, :selected => f.object.hub),{}, {:class => 'form-control'} %>
                </div>


                <div class="form-group" id="div-region">
                            <%= f.label :Region %>
                <%= f.select :region,options_for_select(@region, :selected => f.object.region),{}, {:class => 'form-control'} %>
                </div>
                  
              
      
      <div class="actions">
        <%= f.submit :class => 'btn btn-primary' %>
      </div>
  <% end %>

    </div>
  </div>
</div>


<script>
  
  $(document).ready(function()
  {
   
  
    if (document.getElementById("user_is_case_team").checked){

      document.getElementById("role").value = 6
      
      
      $('#div-department').show();
      $('#div-region').hide();
      $('#div-hub').hide();
   

     

    }
    else if (document.getElementById("user_hub_user").checked){
       
      document.getElementById("role").value = 7

      $('#div-department').hide();
      $('#div-region').hide();
      $('#div-hub').show();

     

    }
    else if (document.getElementById("user_regional_user").checked){

      document.getElementById("role").value = 8

      $('#div-department').hide();
      $('#div-region').show();
      $('#div-hub').hide();

    
    }
    else{
        $('#div-department').hide();
      $('#div-region').hide();
      $('#div-hub').hide();
    }
  });

  $('#role').change(function()
  {
    if (this.value == 6){ /* case team */

      $('#div-department').show();
      $('#div-region').hide();
      $('#div-hub').hide();

      document.getElementById("user_is_admin").checked = false;
      document.getElementById("user_is_case_team").checked = true;
      document.getElementById("user_hub_user").checked = false;
      document.getElementById("user_regional_user").checked = false;

    }
    else if (this.value == 7 ){ /* hubs */
      $('#div-department').hide();
      $('#div-region').hide();
      $('#div-hub').show();

      
      document.getElementById("user_is_admin").checked = false;
      document.getElementById("user_is_case_team").checked = false;
      document.getElementById("user_hub_user").checked = true;
      document.getElementById("user_regional_user").checked = false;
      

    }
    else if (this.value == 8){ /* regional */
      $('#div-department').hide();
      $('#div-region').show();
      $('#div-hub').hide();

      document.getElementById("user_is_admin").checked = false;
      document.getElementById("user_is_case_team").checked = false;
      document.getElementById("user_regional_user").checked = true;
      document.getElementById("user_hub_user").checked = false;

    }
    else{     
                       /* admin */
      $('#div-department').hide();
      $('#div-region').hide();
      $('#div-hub').hide();

      document.getElementById("user_is_admin").checked = true;
      document.getElementById("user_is_case_team").checked = false;
      document.getElementById("user_regional_user").checked = false;
      document.getElementById("user_hub_user").checked = false;

    }
  });
</script>